"use strict";function changeSite(e){var t=e.target.getAttribute("data-section");"mainGallery"==t&&mainSectionController(mainGallery),"mainGenres"==t&&mainSectionController(mainGenres),"mainHome"==t&&mainSectionController(mainHome)}function changeToHome(e){mainSectionController(mainHome)}function openMovieoverlay(e){if(console.log(e),e.target.parentNode.hasAttribute("movie-id")){var t=e.target.parentNode.getAttribute("movie-id");controllerMovieOverlay("open",movieAPI.getMovieById(t))}if(e.target.hasAttribute("movie-id")){var r=e.target.getAttribute("movie-id");controllerMovieOverlay("open",movieAPI.getMovieById(r))}}function controllerActors(e){fetchTMDb({task:"actor",personID:e}).then(function(e){addLazySpinner(matImg,matImgContainer),matImg.onload=function(){this.classList.remove("lazy"),removeLazySpinner(matImgContainer)},matImg.setAttribute("src","http://image.tmdb.org/t/p/w185"+e.profile_path),matName.textContent=e.name,madBiography.textContent=e.biography,madFrom.textContent=e.place_of_birth,madBirthday.textContent=e.birthday;var t=clearMovieList(e.movie_credits.cast);addMostPopular(t),assembelFilmography(sortMovieByYear(t))})}function addLazySpinner(e,t){t.classList.add("lazy-spinner"),0==e.classList.contains("lazy")&&(e.classList.add("lazy"),e.setAttribute("src",""))}function removeLazySpinner(e){e.classList.remove("lazy-spinner")}function addMostPopular(e){e=sortMovieByRating(e);for(var t=0;t<8;t++){(function(t){if(addLazySpinner(matItemImg[t],matItem[t]),t+1>=e.length)return matItemTitle[t].textContent="",removeLazySpinner(matItem[t]),"continue";matItemImg[t].onload=function(){this.classList.remove("lazy"),removeLazySpinner(matItem[t])},matItemImg[t].setAttribute("src","http://image.tmdb.org/t/p/w185"+e[t].poster_path),matItem[t].setAttribute("movie-id",""+e[t].id);var r=e[t].title+" ("+parseFloat(e[t].release_date)+")";matItemTitle[t].textContent=r})(t)}}function clearMovieList(e){var t=[];return e.map(function(e){e.release_date&&e.poster_path&&t.push(e)}),t}function sortMovieByRating(e){return e.sort(function(e,t){return t.vote_count-e.vote_count}),e}function sortMovieByYear(e){return e.sort(function(e,t){return parseFloat(t.release_date)-parseFloat(e.release_date)}),movieAPI.setMovieArr(e),e}function assembelFilmography(e){var t=document.createDocumentFragment(),r=0,n=0;madTimeline.innerHTML="";for(var o=0;o<e.length;o++)0==o&&t.appendChild(addFilmographyStart()),(n=parseFloat(e[o].release_date))!=r&&(r=n,t.appendChild(addFilmographyYear(n))),t.appendChild(addFilmographyContent(e[o].title,e[o].id)),o==e.length-1&&(t.appendChild(addFilmographyEmpty()),t.appendChild(addFilmographyEnd()));madTimeline.appendChild(t)}function addFilmographyStart(){var e=document.createElement("li"),t=document.createElement("i");return e.className="mad-start",t.className="fa fa-arrow-circle-o-up",t.setAttribute("aria-hidden","true"),e.appendChild(t),e}function addFilmographyYear(e){var t=document.createElement("li");return t.className="mad-year",t.textContent=e,t}function addFilmographyContent(e,t){var r=document.createElement("li");return r.className="mad-content",r.textContent=e,r.setAttribute("movie-id",""+t),r}function addFilmographyEmpty(){var e=document.createElement("li");return e.className="mad-empty",e}function addFilmographyEnd(){var e=document.createElement("li"),t=document.createElement("i");return e.className="mad-end",t.className="fa fa-stop-circle",t.setAttribute("aria-hidden","true"),e.appendChild(t),e}function toggleArranger(e){"false"!=mgArranger.getAttribute("data-open")?mgArranger.setAttribute("data-open","false"):mgArranger.setAttribute("data-open","true")}function getArrangerSettings(){return{filtering:{genre:getArrangerCheckbox(),rating:sliderRating.noUiSlider.get(),runtime:parseData(sliderRuntime.noUiSlider.get()),year:parseData(sliderYear.noUiSlider.get())},sorting:{sortingby:getArrangerRadiobuttons(),sortingorder:getArrangerSortingorder()}}}function parseData(e){var t=[];for(var r in e)t.push(parseInt(e[r]));return t}function getArrangerCheckbox(){for(var e=[],t=0;t<mgFilteringGenre.length;t++)1==mgFilteringGenre[t].checked&&e.push(mgFilteringGenre[t].value);return e}function getArrangerRadiobuttons(){for(var e=0;e<mgRadioInput.length;e++)if(1==mgRadioInput[e].checked)return mgRadioInput[e].value}function getArrangerSortingorder(){return mgSortingOrder[0].checked?mgSortingOrder[0].value:mgSortingOrder[1].value}function compareArranger(){var e=getArrangerSettings();if(compareSettings(e,"filtering")){console.log("--------------------------------------------"),console.log("UPDATE DOM - with new filter"),window.lastSettings=e;var t={task:"discover",settings:lastSettings};return toggleArranger(),void controllerMovies(t,"reset-movies")}if(compareSettings(e,"sorting")){console.log("UPDATE DOM - with new positioning"),window.lastSettings=e,toggleArranger();var r=sortingMovies(e.sorting.sortingby,e.sorting.sortingorder);return clearMovieElements(),addMovieElements(r),void movieAPI.setMovieArr(r)}console.log("No changes found"),toggleArranger()}function compareSettings(e,t){return JSON.stringify(lastSettings[t])!==JSON.stringify(e[t])}function sortingMovies(e,t){function r(e,t,r){var o=void 0;return"word"==e&&(o=n.sort(sortingWords(t,r))),"number"==e&&(o=n.sort(sortingNumbers(t,r))),o}var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:movieAPI.getMovieArr();if(n)return console.log("Sorting by "+e),"rating"==e?r("number","vote_average",t):"popularity"==e?r("number","popularity",t):"year"==e?r("number","release_date",t):"title"==e?r("word","title",t):void 0}function setGenre(e){for(var t in mgGenreContainer)mgGenreContainer[t].getAttribute("data-genre-id")==e&&(mgGenreContainer[t].children[0].checked=!0)}function removeGenres(){for(var e in mgGenreContainer)mgGenreContainer[e].children[0].checked=!1}function sortingNumbers(e,t){return function(r,n){return"lowest"==t?parseFloat(r[e])-parseFloat(n[e]):"highest"==t?parseFloat(n[e])-parseFloat(r[e]):void 0}}function sortingWords(e,t){return function(r,n){var o=r[e].toUpperCase(),i=n[e].toUpperCase();if("lowest"==t){if(o<i)return-1;if(o>i)return 1}if("highest"==t){if(o>i)return-1;if(o<i)return 1}return 0}}function loadMovies(e){return Promise.resolve(fetchTMDb(e))}function controllerMovies(e,t){"reset-movies"==t&&(console.log("Resetting movies!"),movieAPI.clearMovies(),clearMovieElements(),resetMonitor()),monitorMovieElements.total_pages==monitorMovieElements.current_page&&monitorMovieElements.fetched?console.log("All movies loaded!"):loadMovies(e).then(function(e){var t=sortingMovies(lastSettings.sorting.sortingby,lastSettings.sorting.sortingorder,e.results);return movieAPI.setMovie(t),monitorMovieElements.total_pages=e.total_pages,monitorMovieElements.fetched=!0,scrollGate=!1,t}).then(function(e){addMovieElements(e)}).then(function(e){return 1==monitorMovieElements.current_page&&calcWindowPosition(),e}).catch(function(t){console.log("---------------------------------"),console.log("Failed somewhere at => loadMovies"),console.log(t),console.log(resp),console.log(e),console.log("---------------------------------")})}function findMovieIndex(e,t){for(var r=0;r<t.length;r++)if(t[r].id==e)return r;throw new Error("Couldnt find following ID - returning index number instead")}function mergeNestedArrays(e){var t=[];for(var r in e)for(var n in e[r].results)t.push(e[r].results[n]);return t}function addMovieElements(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=document.createDocumentFragment(),r=0;r<e.length;r++)!function(r){var n=document.createElement("li");n.className="mg-movie-item",n.setAttribute("movie-id",""+e[r].id);var o=document.createElement("div");o.className="mg-movie-image-con";var i=document.createElement("img");i.className="mg-movie-image",addLazySpinner(i,o),i.onload=function(){this.classList.remove("lazy"),removeLazySpinner(o)},i.setAttribute("src",""+(urlImageBase+e[r].poster_path)),o.appendChild(i);var a=document.createElement("h3");a.className="mg-movie-title",a.innerText=""+e[r].title;var l=document.createElement("h4");l.className="mg-movie-year",l.innerText=""+parseFloat(e[r].release_date),n.appendChild(o),n.appendChild(a),n.appendChild(l),t.appendChild(n)}(r);mgMovieContainer.appendChild(t)}function clearMovieElements(){mgMovieContainer.innerHTML=""}function resetMonitor(){monitorMovieElements={total_pages:0,current_page:0,fetched:!1}}function mouseFilter(e){var t=void 0;if(e.target.parentNode.classList.contains("mg-movie-item"))t=e.target.parentNode;else{if(!e.target.parentNode.parentNode.classList.contains("mg-movie-item"))return;t=e.target.parentNode.parentNode}if(updateMovieSeletion(t),"click"!=e.type)if("dblclick"!=e.type);else{var r=t.getAttribute("movie-id");controllerMovieOverlay("open",movieAPI.getMovieById(r))}}function updateMovieSeletion(e){var t=document.querySelector('.mg-movie-item[movie-id="'+movieSelection.current+'"]');null!==t&&t.removeAttribute("movie-selected"),e.setAttribute("movie-selected","true"),movieSelection.current=e.getAttribute("movie-id")}function calcMovieSelection(e,t){function r(e,t){updateMovieSeletion(document.querySelector(".mg-movie-item:nth-child("+(e+1)+")"));var r=document.getElementById("footer-key-"+t);r.setAttribute("style","background-color: #1abc9c"),setTimeout(function(){r.removeAttribute("style")},300)}var n=currentDomPosition(movieSelection.current),o=moviesPrRow();if("37"==e){if(0==n)return;return n%o==0&&pageScroll("up"),n-=1,void r(n,e)}if("38"==e&&0==scrollActive){if(o>n)return;return n-=o,pageScroll("up"),void r(n,e)}if("39"==e){if(n==movieAPI.getMovieArr().length-1)return;return(n+=1)%o==0&&pageScroll("down"),void r(n,e)}if("40"==e&&0==scrollActive){if(n+o>movieAPI.getMovieArr().length-1)return;return n+=o,pageScroll("down"),void r(n,e)}"13"==e&&controllerMovieOverlay("open",movieAPI.getMovieByIndex(n))}function pageScroll(e){function t(){clearInterval(o),scrollActive=!1}if(1!=scrollActive){scrollActive=!0,inc="up"==e?-Math.abs(inc):Math.abs(inc);var r=0,n=0,o=setInterval(function(){n++,console.log(n),n>=37&&t(),window.scrollBy(0,inc),r+=inc},1)}}function moviesPrRow(){var e=document.querySelector(".mg-movie-item").offsetWidth+20,t=mgMovieContainer.offsetWidth;return Math.floor(t/e)}function currentDomPosition(e){for(var t=0;mgMovieContainer.children[t];){if(mgMovieContainer.children[t].getAttribute("movie-id")===e)return t;t++}}function calcWindowPosition(e){if(mainGalleryActive=mainGallery.getAttribute("data-active"),!scrollGate&&"false"!=mainGalleryActive){windowSize=window.innerHeight,scrollPosition=window.pageYOffset;var t=header.offsetHeight+mainGallery.offsetHeight-windowSize-scrollPosition;Number(t)<450&&(scrollGate=!0,controllerMovies({task:"discover",settings:lastSettings}))}}function mainSectionController(e,t){for(var r in main)"true"==main[r].getAttribute("data-active")&&main[r].setAttribute("data-active","false");e.setAttribute("data-active","true"),e==mainActors&&(controllerActors(t),document.scrollingElement.scrollTop=0),e==mainGallery?(t||(t={task:"discover",settings:lastSettings}),controllerMovies(t,"reset-movies"),footerKeyboard.classList.add("show-keys")):footerKeyboard.classList.remove("show-keys"),e==mainWall&&controllerSearch(t),e==mainHome?(mhsInput.focus(),overlayColor.setAttribute("data-home-active","true"),header.style="background-color: rgba(236,236,236,0)"):(overlayColor.setAttribute("data-home-active","false"),header.style="background-color: rgba(236,236,236,1)")}function returnDataId(e){var t=e.target.parentNode;return t.hasAttribute("data-id")?movieAPI.getMovieById(t.getAttribute("data-id")):t.parentNode.hasAttribute("data-id")?movieAPI.getMovieById(t.getAttribute("data-id")):void 0}function controllerSearch(e){fetchTMDb({task:"multisearch",query:e,pageNr:1}).then(function(e){return movieAPI.setMovieArr(e.results),e}).then(function(t){return assembelSearch(t.results,e,t.total_results)})}function assembelSearch(e,t,r){mwsQuery.textContent=t,mwsMoviesContainer.textContent="",mwsPersonsContainer.textContent="",mwsMovies.classList.remove("mws-visible"),mwsPersons.classList.remove("mws-visible");for(var n=0,o=0,i=0;i<e.length;i++){var a=e[i];if("movie"==a.media_type){if(n++,!a.poster_path)return;mwsMovies.classList.contains("mws-visible")||mwsMovies.classList.add("mws-visible");var l=createMwsItem(a.title,a.release_date,a.overview,"fa fa-calendar",a.poster_path);l.setAttribute("data-id",""+a.id),mwsMoviesContainer.appendChild(l)}if("person"==a.media_type){if(o++,!a.profile_path)return;mwsPersons.classList.contains("mws-visible")||mwsPersons.classList.add("mws-visible");var s=createMwsItem(a.name,a.popularity,"","fa fa-fire",a.profile_path);s.setAttribute("data-id",""+a.id),mwsPersonsContainer.appendChild(s)}i+1<e.length&&(mwsMoviesQueryResult.textContent=n,mwsPersonsQueryResult.textContent=o)}}function createMwsItem(e,t,r,n,o,i){var a=document.createElement("div");return a.className="mws-item",a.appendChild(createPosterItem(o)),a.appendChild(createH3Item(e)),a.appendChild(createH5Item(t,n)),a.appendChild(createPItem(r)),a}function createPosterItem(e){var t=document.createElement("img");return t.className="mws-poster-item",t.setAttribute("style","background-image: url('http://image.tmdb.org/t/p/w45"+e+"')"),t}function createH3Item(e){var t=document.createElement("h3");return t.className="mws-h3-item",t.textContent=e,t}function createH5Item(e,t){var r=document.createElement("span"),n=document.createElement("span"),o=document.createElement("h5");return r.className=t,n.textContent=e,o.className="mws-h5-item",o.appendChild(r),o.appendChild(n),o}function createPItem(e){var t=document.createElement("p");return t.className="mws-p-item",t.textContent=e,t}function controllerMovieOverlay(e,t){if("open"==e){var r={task:"movie",movieID:t.id};Promise.resolve(fetchTMDb(r)).then(function(e){return updateMovieOverlay(e)}),omPoster.setAttribute("style",'background-image: url("http://image.tmdb.org/t/p/w342'+t.poster_path+'")'),omPosterInner.setAttribute("style",'background-image: url("http://image.tmdb.org/t/p/w342'+t.poster_path+'")'),overlayMovies.setAttribute("data-active","true"),overlayMovies.addEventListener("click",toggleOverlay),overlayMovieCon.addEventListener("click",toggleOverlayCon)}"close"==e&&(overlayMovies.setAttribute("data-active","false"),overlayMovies.removeEventListener("click",toggleOverlay),overlayMovieCon.removeEventListener("click",toggleOverlayCon),closeTrailer())}function toggleOverlay(){controllerMovieOverlay("close")}function toggleOverlayCon(e){if(e.stopPropagation(),e.target.hasAttribute("data-actor-id")&&(controllerMovieOverlay("close"),mainSectionController(mainActors,e.target.getAttribute("data-actor-id"))),e.target.hasAttribute("data-genre-id")){controllerMovieOverlay("close"),removeGenres(),setGenre(e.target.getAttribute("data-genre-id")),window.lastSettings=getArrangerSettings();var t={task:"discover",genreID:e.target.getAttribute("data-genre-id"),settings:lastSettings};mainSectionController(mainGallery,t)}"om-trailer-play"==e.target.id&&openTrailer()}function updateMovieOverlay(e){addCastPictures(e.credits.cast),omTitle.textContent=e.title+"  - "+e.tagline,omYear.textContent=parseFloat(e.release_date),omDuration.textContent=e.runtime,omRating.textContent=e.vote_average,omVotes.textContent=e.vote_count+" votes",omDirector.textContent=getIdentity(e.credits.crew,"Director"),omWriter.textContent=getIdentity(e.credits.crew,"Writer","Screenplay"),omReleasedate.textContent=e.release_date,omDescription.textContent=e.overview,addInnerElements(e.credits.cast,6,"actor",omActors),addInnerElements(e.genres,!1,"genre",omGenre),youtubeID=e.videos.results[0].key}function openTrailer(){var e="https://www.youtube.com/embed/"+youtubeID+"?rel=0&modestbranding=1&autohide=1&autoplay=1&iv_load_policy=3";omTraileriFrame.setAttribute("src",e),omTrailer.setAttribute("data-open","true")}function closeTrailer(){omTrailer.setAttribute("data-open","false"),omTraileriFrame.setAttribute("src","")}function addCastPictures(e){console.log("ACTORS ===================="),console.log(e),console.log("ACTORS ====================");for(var t in omActorsIconChildren)omActorsIconChildren[t].setAttribute("style","background-image: url('http://image.tmdb.org/t/p/w45"+e[t].profile_path+"')"),omActorsIconChildren[t].setAttribute("data-actor-id",""+e[t].id)}function addInnerElements(e,t,r,n){var o=document.createDocumentFragment();t||(t=e.length);for(var i=0;i<t;i++){var a=document.createElement("span");a.className="om-inner-element",a.setAttribute("data-"+r+"-id",""+e[i].id),a.textContent=""+e[i].name,o.appendChild(a)}n.textContent="",n.appendChild(o)}function getIdentity(e,t,r){for(var n in e)if(e[n].job==t||e[n].job==r)return e[n].name}function controllerSearchField(e){e.stopPropagation(),0==searchField?openSearchField(e):searchField&&closeSearchField(e)}function openSearchField(e){searchField=!0,headerSearchInput.focus(),headerSearch.setAttribute("data-active","true"),movieContainer.style="filter: blur(10px)",DOMbody.addEventListener("click",closeSearchField)}function closeSearchField(e){"header-search-input"==e.target.id&&27!=e.keyCode||(searchField=!1,headerSearchInput.blur(),headerSearch.setAttribute("data-active","false"),headerSearchInput.value="",movieContainer.style="filter: blur(0px)",DOMbody.removeEventListener("click",closeSearchField))}function startSearch(e){""!=headerSearchInput.value&&mainSectionController(mainWall,headerSearchInput.value)}function keypressSearchField(e){if(searchField){if(13==e.keyCode)return void startSearch(e);27==e.keyCode&&closeSearchField(e)}}function fetchTMDb(e){function t(e,t){return fetch(e).then(function(e){return handleErrors(e,t)}).then(function(e){return e.json()}).then(function(e){return console.log(e),e}).catch(function(e){return console.log("TMDb data fetch failed")})}var r="c6aea5536b7de40d0294eb356df3c3df",n="&include_adult=false";return"movie"==e.task?(console.log("TASK = MOVIE"),t("https://api.themoviedb.org/3/movie/"+e.movieID+"?api_key="+r+"&append_to_response=credits,videos",e.task)):"multisearch"==e.task?(console.log("TASK = MULTISEARCH"),t("https://api.themoviedb.org/3/search/multi?api_key="+r+"&language=en-US"+n+"&query="+e.query+"&page="+e.pageNr,e.task)):"actor"==e.task?(console.log("TASK = ACTOR"),t("https://api.themoviedb.org/3/person/"+e.personID+"?api_key="+r+"&language=en-US&append_to_response=movie_credits",e.task)):"discover"==e.task?(console.log("TASK = DISCOVER"),monitorMovieElements.current_page+=1,t("https://api.themoviedb.org/3/discover/movie?api_key="+r+n+"&include_video=false"+assembleSettings(e.settings)+"&page="+monitorMovieElements.current_page,e.task)):void 0}function handleErrors(e,t){return e.ok||(console.log(e),console.log(t+"      <=========== following task failed")),e}function assembleSettings(e){return"&"+("with_genres="+getGenreID(e.filtering.genre))+"&"+("vote_average.gte="+e.filtering.rating[0])+"&"+("vote_average.lte="+e.filtering.rating[1])+"&"+("with_runtime.gte="+e.filtering.runtime[0])+"&"+("with_runtime.lte="+e.filtering.runtime[1])+"&"+("primary_release_date.gte="+e.filtering.year[0]+"-01-01")+"&"+("primary_release_date.lte="+e.filtering.year[1]+"-01-01")}function getGenreID(e){for(var t="",r=0;r<e.length;r++)0!=r&&(t+=","),t+=genreList[e[r]];return t}var headerContainer=document.getElementById("header-container"),headerNavigation=document.getElementById("header-navigation-ul"),headerLogo=document.getElementById("header-logo");window.addEventListener("load",function(){headerNavigation.addEventListener("click",changeSite),headerLogo.addEventListener("click",changeToHome)});var mainActors=document.getElementById("main-actors"),matImg=document.getElementById("mat-img"),matImgContainer=document.getElementById("mat-img-container"),matName=document.getElementById("mat-name"),madBiography=document.getElementById("mad-biography"),madFrom=document.getElementById("mad-from"),madBirthday=document.getElementById("mad-birthday"),madTimeline=document.getElementById("mad-timeline"),matItem=document.querySelectorAll(".mat-item"),matItemImg=document.querySelectorAll(".mat-item-img"),matItemTitle=document.querySelectorAll(".mat-item-title");mainActors.addEventListener("click",openMovieoverlay);var mgArranger=document.getElementById("mg-arranger-container"),mgToggle=document.getElementById("mg-toggle"),mgRefresh=document.getElementById("mg-refresh");mgToggle.addEventListener("click",toggleArranger),mgRefresh.addEventListener("click",compareArranger);var lastSettings=[],mgFilteringGenre=document.getElementsByClassName("mg-checkbox"),mgRadioInput=document.getElementsByClassName("mg-radio-input"),mgSortingOrder=document.getElementsByClassName("mg-sorting-order"),mgGenreContainer=Array.from(document.getElementById("mg-genre-container").children),monitorMovieElements={total_pages:0,current_page:0,fetched:!1},movieAPI=function(){var e=[];return{clearMovies:function(t){e=[]},setMovie:function(t){t.map(function(t){return e.push(t)})},setMovieArr:function(t){e=JSON.parse(JSON.stringify(t))},getMovie:function(t){return e[t]},getMovieArr:function(){return JSON.parse(JSON.stringify(e))},getMovieById:function(t){return e[findMovieIndex(t,e)]},getMovieByIndex:function(t){return JSON.parse(JSON.stringify(e[t]))}}}(),urlImageBase="http://image.tmdb.org/t/p/w154",mgMovieContainer=document.getElementById("mg-movie-container"),keyboardStateActive=!1;mgMovieContainer.addEventListener("dblclick",mouseFilter),mgMovieContainer.addEventListener("click",mouseFilter),mgMovieContainer.addEventListener("keyup",function(){keyboardStateActive=!1}),mgMovieContainer.addEventListener("keydown",function(e){if(keyboardStateActive)return e.preventDefault(),void console.log("keyboard event cancelled");keyboardStateActive=!0;var t=overlayMovies.getAttribute("data-active");if("27"==e.keyCode&&"true"==t)return e.preventDefault(),void controllerMovieOverlay("close");"true"!=t&&("37"!=e.keyCode&&"38"!=e.keyCode&&"39"!=e.keyCode&&"40"!=e.keyCode&&"13"!=e.keyCode||(e.preventDefault(),calcMovieSelection(e.keyCode,e)))});var movieSelection={current:null},scrollActive=!1,movieHeight=23.125,movieHeightRel=1/window.devicePixelRatio*16*movieHeight,inc=10;window.addEventListener("scroll",calcWindowPosition);var scrollGate=!1,header=document.getElementById("header"),windowSize=void 0,scrollPosition=void 0,mainGalleryActive=void 0,mainGenreCon=document.getElementById("main-genre-container");mainGenreCon.addEventListener("click",function(e){for(var t=0;t<e.path.length;t++)if(e.path[t].hasAttribute("data-id")){console.log(e.path[t]),removeGenres(),setGenre(e.path[t].getAttribute("data-id")),window.lastSettings=getArrangerSettings();var r={task:"discover",genreID:e.path[t].getAttribute("data-id"),settings:lastSettings};mainSectionController(mainGallery,r);break}}),window.onload=function(){window.lastSettings=getArrangerSettings()};var main=Array.from(document.getElementById("main").children),mainHome=document.getElementById("main-home"),mainWall=document.getElementById("main-wall"),mainActors=document.getElementById("main-actors"),mainGenres=document.getElementById("main-genre"),mainGallery=document.getElementById("main-gallery"),overlayColor=document.getElementById("overlay-color"),footerKeyboard=document.getElementById("footer-keyboard"),siteContainer=document.getElementById("site-container"),mwsMoviesContainer=document.getElementById("mws-movies-container"),mwsPersonsContainer=document.getElementById("mws-persons-container"),mwsMovies=document.getElementById("mws-movies"),mwsPersons=document.getElementById("mws-persons"),mwsMoviesQueryResult=document.getElementById("mws-results-movies"),mwsPersonsQueryResult=document.getElementById("mws-results-persons"),mwsQuery=document.getElementById("mws-query");mwsMoviesContainer.addEventListener("click",function(e){controllerMovieOverlay("open",returnDataId(e))}),mwsPersonsContainer.addEventListener("click",function(e){mainSectionController(mainActors,returnDataId(e).id)});var omPoster=document.getElementById("om-poster"),omPosterInner=document.getElementById("om-poster-inner"),omTitle=document.getElementById("om-title"),omYear=document.getElementById("om-year"),omDuration=document.getElementById("om-duration"),omRating=document.getElementById("om-rating"),omVotes=document.getElementById("om-votes"),omDirector=document.getElementById("om-director"),omGenre=document.getElementById("om-genre"),omWriter=document.getElementById("om-writer"),omReleasedate=document.getElementById("om-releasedate"),omActors=document.getElementById("om-actors"),omDescription=document.getElementById("om-description"),omActorsIcon=document.getElementById("om-actors-icon"),omActorsIconChildren=Array.from(document.getElementById("om-actors-icon").children),overlayMovies=document.getElementById("overlay-movies"),overlayMovieCon=document.getElementById("overlay-movies-container"),omTrailer=document.getElementById("om-trailer"),omTrailerExit=document.getElementById("om-trailer-exit"),omTraileriFrame=document.getElementById("om-trailer-iframe");omTrailerExit.addEventListener("click",closeTrailer);var youtubeID=void 0,DOMbody=document.getElementsByTagName("body")[0],headerSearchLogo=document.getElementById("header-search-logo"),headerSearchInput=document.getElementById("header-search-input"),headerSearch=document.getElementById("header-search"),movieContainer=document.getElementById("mg-movie-container"),mhsInput=document.getElementById("mhs-input"),mhsSearch=document.getElementById("mhs-search"),searchField=!1;headerSearchLogo.addEventListener("click",controllerSearchField),headerSearchInput.addEventListener("keydown",keypressSearchField),function(){function e(e){if("click"==e.type||13==e.keyCode){if(""==mhsInput.value)return;return mainSectionController(mainWall,mhsInput.value),void(mhsInput.value="")}}mhsInput.addEventListener("keyup",e),mhsSearch.addEventListener("click",e)}();var genreList={action:28,adventure:12,animation:16,comedy:35,crime:80,documentary:99,drama:18,fantasy:14,history:36,horror:27,mystery:9648,romance:10749,scifi:878,thriller:53,war:10752,western:37},sliderRating=document.getElementById("mg-slider-rating"),sliderRuntime=document.getElementById("mg-slider-runtime"),sliderYear=document.getElementById("mg-slider-year");noUiSlider.create(sliderRating,{start:[5.3,9.5],connect:!0,tooltips:[wNumb({decimals:1}),wNumb({decimals:1})],range:{min:[1],max:[10]}}),noUiSlider.create(sliderRuntime,{start:[60,220],connect:!0,animationDuration:300,tooltips:[wNumb({decimals:0}),wNumb({decimals:0})],range:{min:[60],max:[300]}}),noUiSlider.create(sliderYear,{start:[2005,2017],connect:!0,orientation:"vertical",tooltips:[wNumb({decimals:0}),wNumb({decimals:0})],range:{min:[1940],"50%":[2e3],max:[2020]}});